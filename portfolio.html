<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Portfolio | Lex Root Agency - Case Studies & Success Stories</title>
    <meta name="description" content="Explore Lex Root Agency's portfolio of successful projects in compliance, legal content strategy, and legal marketing. See how we deliver impactful results.">
    <meta name="keywords" content="lex root portfolio, case studies, legal tech projects, compliance solutions, content strategy success, legal marketing examples, AI legal portfolio">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0a0e27;
            --secondary: #5e60ce;
            --accent: #00f5ff;
            --accent-alt: #ff006e;
            --text-light: #ffffff;
            --text-muted: #b4b4b4;
            --bg-dark: #030616;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --neon-glow: 0 0 20px rgba(0, 245, 255, 0.5);
            --accent-rgb: 0, 245, 255; /* For use in rgba */
        }

        html {
            scroll-behavior: smooth;
            cursor: none;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-light);
            overflow-x: hidden;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 10001;
            transform: translate(-50%, -50%);
            will-change: transform;
            mix-blend-mode: difference;
            transition: width 0.2s ease, height 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
        }

        .cursor-follower {
            width: 40px;
            height: 40px;
            background: rgba(var(--accent-rgb), 0.1);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
            will-change: transform;
            transition: background-color 0.2s ease;
        }

        .cursor.hover {
            width: 40px;
            height: 40px;
            background: rgba(var(--accent-rgb), 0.2);
            border-color: var(--accent-alt);
        }

        /* Loading Screen */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            z-index: 2001; /* Higher than modal */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader-text {
            font-size: 3rem;
            font-weight: bold;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.5rem 3rem;
            z-index: 1000;
            backdrop-filter: blur(20px);
            background: rgba(10, 14, 39, 0.8);
            transition: all 0.3s ease;
        }

        nav.scrolled {
            padding: 1rem 3rem;
            background: rgba(10, 14, 39, 0.95);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 900;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
            letter-spacing: -1px;
            position: relative;
        }

        .logo::after {
            content: 'â„¢';
            font-size: 0.6rem;
            position: absolute;
            top: 0;
            right: -15px;
        }

        .nav-links {
            display: flex;
            gap: 3rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }

        .nav-links a:hover,
        .nav-links a.active-link {
            color: var(--accent);
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
            box-shadow: var(--neon-glow);
        }

        .nav-links a:hover::before,
        .nav-links a.active-link::before {
            width: 100%;
        }
        
        /* Buttons */
        .btn-primary, .btn-secondary, .view-project {
            padding: 1rem 2.5rem;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border: none;
        }
        .btn-primary, .view-project { /* view-project is styled like btn-primary */
            background: var(--gradient-3);
            color: var(--bg-dark);
            box-shadow: 0 4px 20px rgba(var(--accent-rgb), 0.3);
        }
        .btn-primary:hover, .view-project:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(var(--accent-rgb), 0.5);
        }
        .btn-primary:disabled {
            background: var(--text-muted);
            box-shadow: none;
            transform: none;
            cursor: not-allowed;
        }
        .btn-secondary {
            background: transparent;
            color: var(--text-light);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .btn-secondary:hover {
            border-color: var(--accent);
            color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(var(--accent-rgb), 0.3);
        }


        /* Portfolio Hero */
        .portfolio-hero {
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: radial-gradient(circle at 20% 50%, rgba(94, 96, 206, 0.15) 0%, transparent 45%),
                        radial-gradient(circle at 80% 80%, rgba(var(--accent-rgb), 0.08) 0%, transparent 45%);
            margin-top: 80px; /* Navbar height */
            padding: 3rem 1rem;
        }

        .hero-bg-animation { /* Optional: if you want a specific bg animation for this hero */
            position: absolute;
            width: 100%;
            height: 100%;
            top:0; left:0;
            overflow: hidden;
            opacity: 0.3;
            z-index: 0;
        }

        .grid-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image:  
                linear-gradient(rgba(var(--accent-rgb), 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(var(--accent-rgb), 0.05) 1px, transparent 1px);
            background-size: 40px 40px; /* Smaller grid */
            animation: grid-move 15s linear infinite;
        }

        @keyframes grid-move {
            0% { background-position: 0 0; }
            100% { background-position: 40px 40px; }
        }

        .portfolio-hero-content {
            text-align: center;
            max-width: 800px;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }

        .hero-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            background: rgba(var(--accent-rgb), 0.1);
            border: 1px solid rgba(var(--accent-rgb), 0.3);
            border-radius: 50px;
            font-size: 0.9rem;
            color: var(--accent);
            margin-bottom: 2rem;
            animation: fadeInDown 0.8s ease-out;
            backdrop-filter: blur(10px);
        }

        .portfolio-hero h1 {
            font-size: clamp(2.8rem, 6vw, 4.5rem); /* Adjusted size */
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -2px;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }

        .gradient-text {
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }
        .portfolio-hero h1 .gradient-text { /* Specific gradient for portfolio hero if needed */
             animation: gradient-shift 3s ease-in-out infinite;
        }


        @keyframes gradient-shift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }

        .portfolio-hero p {
            font-size: 1.25rem; /* Adjusted size */
            color: var(--text-muted);
            animation: fadeInUp 0.8s ease-out 0.4s backwards;
            font-weight: 300;
            max-width: 650px;
            margin: 0 auto;
        }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }


        /* Filter Tabs */
        .filter-section {
            padding: 4rem 2rem 2rem;
            position: relative;
        }

        .filter-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .filter-tabs {
            display: inline-flex;
            gap: 0.5rem; /* Reduced gap */
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            backdrop-filter: blur(10px);
            flex-wrap: wrap; /* Allow tabs to wrap on smaller screens */
            justify-content: center;
        }

        .filter-tab {
            padding: 0.7rem 1.8rem; /* Adjusted padding */
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 0.9rem; /* Adjusted font size */
            font-weight: 500;
            cursor: none; /* Match body cursor */
            transition: all 0.3s ease;
            border-radius: 50px;
            position: relative;
            overflow: hidden;
            white-space: nowrap; /* Prevent text wrapping in tabs */
        }

        .filter-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-3);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .filter-tab:hover {
            color: var(--text-light);
        }

        .filter-tab.active {
            color: var(--bg-dark);
            font-weight: 600;
        }

        .filter-tab.active::before {
            opacity: 1;
        }

        /* Portfolio Grid */
        .portfolio-section {
            padding: 4rem 2rem 8rem;
            position: relative;
        }

        .portfolio-container { /* Re-used for grid container */
            max-width: 1200px;
            margin: 0 auto;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); /* Adjusted minmax */
            gap: 2.5rem; /* Adjusted gap */
        }

        .project-card {
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: none; /* Match body cursor */
            display: flex; /* For flex layout */
            flex-direction: column; /* Stack image and content */
        }
        /* Initial state for reveal animation */
        .project-card.reveal { 
            opacity: 0;
            transform: translateY(30px);
        }
        /* Active state for reveal animation */
        .project-card.reveal.active {
            opacity: 1;
            transform: translateY(0);
        }


        .project-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(var(--accent-rgb), 0.2);
        }

        .project-image {
            height: 250px;
            background-size: cover; /* Ensure image covers the area */
            background-position: center; /* Center the image */
            position: relative;
            overflow: hidden;
        }
        /* Placeholder image styling */
        .project-image[style*="placehold.co"] {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--bg-dark); /* Text color on placeholder */
        }


        .project-image::before { /* Gradient overlay on image */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.1) 40%, rgba(0,0,0,0.7) 100%);
            opacity: 0.6; /* Initial subtle overlay */
            transition: opacity 0.3s ease;
        }

        .project-card:hover .project-image::before {
            opacity: 0.8; /* Darken on hover to make text pop */
        }

        .project-overlay { /* For "View Case Study" button */
            position: absolute;
            bottom: 1.5rem; /* Position button at bottom */
            left: 1.5rem;
            right: 1.5rem;
            display: flex;
            justify-content: center;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .project-card:hover .project-overlay {
            opacity: 1;
            transform: translateY(0);
        }

        .view-project { /* Already styled like btn-primary */
             padding: 0.8rem 2rem; /* Slightly smaller for overlay */
        }


        .project-content {
            padding: 1.5rem; /* Adjusted padding */
            flex-grow: 1; /* Allow content to fill space */
            display: flex;
            flex-direction: column;
        }

        .project-category {
            display: inline-block;
            padding: 0.3rem 1rem;
            background: rgba(var(--secondary-rgb, 94, 96, 206), 0.1);
            border: 1px solid rgba(var(--secondary-rgb, 94, 96, 206), 0.3);
            border-radius: 50px;
            font-size: 0.75rem; /* Adjusted size */
            color: var(--secondary);
            margin-bottom: 0.75rem; /* Adjusted margin */
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .project-title {
            font-size: 1.3rem; /* Adjusted size */
            font-weight: 700;
            margin-bottom: 0.75rem; /* Adjusted margin */
            line-height: 1.3;
            color: var(--text-light);
        }

        .project-description {
            color: var(--text-muted);
            margin-bottom: 1rem; /* Adjusted margin */
            line-height: 1.6;
            font-size: 0.9rem; /* Adjusted size */
            flex-grow: 1; /* Allow description to take space */
        }

        .project-stats {
            display: flex;
            gap: 1.5rem; /* Adjusted gap */
            margin-bottom: 1rem; /* Adjusted margin */
            flex-wrap: wrap; /* Allow stats to wrap */
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align stats to left */
        }

        .stat-value {
            font-size: 1.3rem; /* Adjusted size */
            font-weight: 700;
            color: var(--accent);
        }

        .stat-label { /* Reusing general stat-label, ensure it's appropriate */
            font-size: 0.75rem; /* Adjusted size */
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px; /* Adjusted spacing */
        }

        .project-tech {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: auto; /* Push tags to bottom */
        }

        .tech-tag {
            padding: 0.3rem 0.8rem;
            background: rgba(var(--accent-rgb), 0.1);
            border: 1px solid rgba(var(--accent-rgb), 0.2);
            border-radius: 50px;
            font-size: 0.75rem; /* Adjusted size */
            color: var(--accent);
        }

        /* Case Study Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(3, 6, 22, 0.9); /* Darker overlay, var(--bg-dark) with alpha */
            backdrop-filter: blur(15px); /* Increased blur */
            z-index: 2000;
            display: none; /* Hidden by default */
            align-items: center; /* Vertically center */
            justify-content: center; /* Horizontally center */
            padding: 2rem; /* Padding for smaller screens */
            opacity: 0; /* For fade-in */
            transition: opacity 0.3s ease-in-out;
        }

        .modal.active {
            display: flex; /* Use flex for centering */
            opacity: 1;
        }

        .modal-content-wrapper { /* New wrapper for scrolling */
            max-width: 900px; /* Max width of modal content */
            width: 100%;
            max-height: 90vh; /* Max height */
            overflow-y: auto; /* Enable scrolling for content */
            background: var(--bg-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            position: relative;
            animation: modalIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .modal-inner-content { /* Actual content padding */
             padding: 3rem;
        }


        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.95) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .close-modal {
            position: absolute;
            top: 1.5rem; /* Adjusted position */
            right: 1.5rem;
            width: 36px; /* Adjusted size */
            height: 36px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none; /* Match body */
            transition: all 0.3s ease;
            color: var(--text-muted);
        }
        .close-modal i { /* Lucide icon for close */
            width: 20px; height: 20px;
        }

        .close-modal:hover {
            background: var(--accent);
            color: var(--bg-dark);
            transform: rotate(90deg) scale(1.1);
        }

        .case-study-header {
            text-align: center;
            margin-bottom: 2.5rem; /* Adjusted margin */
            padding-bottom: 1.5rem; /* Adjusted padding */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .case-study-category { /* Re-using project-category style */
            display: inline-block;
            padding: 0.4rem 1.2rem;
            background: rgba(var(--secondary-rgb), 0.1);
            border: 1px solid rgba(var(--secondary-rgb), 0.3);
            border-radius: 50px;
            font-size: 0.8rem;
            color: var(--secondary);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .case-study-title {
            font-size: 2.2rem; /* Adjusted size */
            font-weight: 900;
            margin-bottom: 1rem;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .case-study-meta {
            display: flex;
            gap: 1.5rem; /* Adjusted gap */
            justify-content: center;
            color: var(--text-muted);
            font-size: 0.9rem; /* Adjusted size */
            flex-wrap: wrap;
        }

        .case-study-meta span {
            display: flex;
            align-items: center; /* Align icon and text */
            gap: 0.5rem;
        }
        .case-study-meta i { /* Lucide icons in meta */
            width: 16px; height: 16px; color: var(--accent);
        }


        .case-study-body {
            margin-bottom: 2.5rem; /* Adjusted margin */
        }

        .case-study-section {
            margin-bottom: 2.5rem; /* Adjusted margin */
        }

        .case-study-section h2 { /* Section titles like "Overview", "Challenge" */
            font-size: 1.6rem; /* Adjusted size */
            margin-bottom: 1rem;
            color: var(--accent);
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(var(--accent-rgb),0.2);
            display: inline-block; /* For border to fit content */
        }

        .case-study-section h3 { /* Sub-titles within sections */
            font-size: 1.3rem; /* Adjusted size */
            margin-top: 1.5rem; /* Add space above sub-titles */
            margin-bottom: 0.75rem; /* Adjusted margin */
            color: var(--text-light);
        }

        .case-study-section p, .case-study-section li {
            color: var(--text-muted);
            line-height: 1.8;
            margin-bottom: 1rem;
            font-size: 1rem; /* Consistent text size */
        }

        .case-study-section ul {
            list-style: none;
            padding-left: 0;
        }

        .case-study-section li {
            padding: 0.5rem 0; /* Adjusted padding */
            padding-left: 1.8em; /* Space for custom bullet */
            position: relative;
        }

        .case-study-section li::before { /* Custom bullet for lists in modal */
            content: '';
            position: absolute;
            left: 0.5em; 
            top: 0.8em; /* Adjust vertical alignment */
            transform: translateY(-50%);
            width: 0.4em; 
            height: 0.4em; 
            background-color: var(--accent); 
            border-radius: 50%; 
        }

        .case-study-section li strong {
            color: var(--text-light);
            font-weight: 600; /* Ensure strong is bold */
        }

        .case-study-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Adjusted minmax */
            gap: 1.5rem; /* Adjusted gap */
            margin-top: 1.5rem; /* Adjusted margin */
        }

        .metric {
            text-align: center;
            padding: 1.5rem; /* Adjusted padding */
            background: rgba(var(--accent-rgb), 0.05);
            border: 1px solid rgba(var(--accent-rgb), 0.15);
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .metric:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 25px rgba(var(--accent-rgb), 0.15);
        }

        .metric-value {
            display: block;
            font-size: 2.5rem; /* Adjusted size */
            font-weight: 900;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.3rem; /* Adjusted margin */
        }

        .metric-label {
            color: var(--text-muted);
            font-size: 0.8rem; /* Adjusted size */
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .case-study-testimonial {
            padding: 2rem; /* Adjusted padding */
            background: rgba(255, 255, 255, 0.02);
            border-left: 3px solid var(--accent); /* Adjusted border */
            border-radius: 10px;
            margin: 2.5rem 0; /* Adjusted margin */
        }

        .case-study-testimonial blockquote {
            font-size: 1.1rem; /* Adjusted size */
            font-style: italic;
            color: var(--text-light);
            line-height: 1.7; /* Adjusted line height */
            margin: 0;
        }
         .case-study-testimonial cite {
            display: block;
            text-align: right;
            margin-top: 0.75rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }


        .case-study-cta {
            text-align: center;
            padding: 2.5rem; /* Adjusted padding */
            background: rgba(var(--secondary-rgb), 0.05);
            border-radius: 20px;
            border: 1px solid rgba(var(--secondary-rgb), 0.15);
            margin-top: 2rem;
        }

        .case-study-cta h3 {
            font-size: 1.6rem; /* Adjusted size */
            margin-bottom: 1.2rem; /* Adjusted margin */
            color: var(--text-light);
        }
        
        /* AI Outcome Forecaster in Modal */
        .ai-outcome-forecaster {
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .ai-outcome-forecaster h4 {
            font-size: 1.3rem;
            color: var(--accent);
            margin-bottom: 1rem;
            text-align: left;
        }
        .ai-outcome-input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        #ai-objective-input {
            flex-grow: 1;
            padding: 0.8rem 1.2rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            color: var(--text-light);
            font-size: 0.9rem;
            height: 44px;
        }
        #ai-objective-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        #ai-forecast-submit {
            padding: 0.8rem 1.5rem;
            height: 44px;
            font-size: 0.9rem;
            /* Uses .btn-primary styles */
        }
        #ai-forecast-response {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(10,14,39,0.5); /* Darker than modal bg */
            border-radius: 10px;
            font-size: 0.9rem;
            color: var(--text-muted);
            min-height: 2.5em; /* Reserve space */
            text-align: left;
        }
         .ai-forecast-status { /* For loading/error messages */
            font-size: 0.85rem;
            min-height: 1.2em;
            text-align: left;
            margin-top: 0.5rem;
        }
        .ai-forecast-loading { color: var(--accent); }
        .ai-forecast-error { color: var(--accent-alt); }


        /* Footer */
        footer {
            padding: 4rem 2rem 2rem;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .social-links {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .social-links a {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--text-muted);
            transition: all 0.3s ease;
        }
        .social-links a i { width: 24px; height: 24px; }


        .social-links a:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: 0 10px 30px rgba(var(--accent-rgb), 0.3);
        }

        /* Mobile Menu */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: none; /* Match body */
            padding: 10px;
            z-index: 1001;
            background: transparent;
            border: none;
        }
        .mobile-menu-toggle.open span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
        .mobile-menu-toggle.open span:nth-child(2) { opacity: 0; }
        .mobile-menu-toggle.open span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }


        .mobile-menu-toggle span {
            width: 25px;
            height: 2px;
            background: var(--text-light);
            transition: all 0.3s ease;
            border-radius: 1px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav { padding: 1rem 1.5rem; }
            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 100%;
                height: 100vh;
                background: var(--bg-dark);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                transition: right 0.5s cubic-bezier(0.77, 0, 0.175, 1);
                z-index: 999;
            }

            .nav-links.active {
                right: 0;
            }
            .nav-links a { font-size: 1.2rem; padding: 1rem 0; }


            .mobile-menu-toggle {
                display: flex;
            }

            .portfolio-hero h1 { font-size: 2.5rem; } /* Adjusted for mobile */
            .portfolio-hero p { font-size: 1.1rem; }

            .filter-tabs { gap: 0.5rem; padding: 0.3rem; }
            .filter-tab { padding: 0.6rem 1.2rem; font-size: 0.85rem; }

            .portfolio-grid { grid-template-columns: 1fr; gap: 2rem; }
            .project-card { margin-bottom: 1rem; } /* Add some space if they stack too tightly */
            
            .modal-content-wrapper { margin: 1rem; max-height: 95vh; } /* Adjust modal for mobile */
            .modal-inner-content { padding: 1.5rem; }
            .close-modal { top: 1rem; right: 1rem; width: 32px; height: 32px;}
            .case-study-title { font-size: 1.8rem; }
            .case-study-meta { flex-direction: column; gap: 0.5rem; align-items: center;}
            .case-study-section h2 { font-size: 1.4rem; }
            .case-study-section h3 { font-size: 1.2rem; }
            .case-study-metrics { grid-template-columns: 1fr; gap: 1rem; } /* Stack metrics on mobile */
            .metric-value { font-size: 2.2rem; }
            .case-study-testimonial { padding: 1.5rem; }
            .case-study-testimonial blockquote { font-size: 1rem; }
            .ai-outcome-input-group { flex-direction: column; }
            #ai-objective-input { width: 100%; margin-bottom: 0.5rem; }
            #ai-forecast-submit { width: 100%; }

        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }
          @keyframes spin { to { transform: rotate(360deg); } }
        .spin { animation: spin 1s linear infinite; display: inline-block; }
    </style>
</head>
<body>
    <div class="loader" id="loader">
        <div class="loader-text">PORTFOLIO</div>
    </div>

    <div class="cursor" id="cursor"></div>
    <div class="cursor-follower" id="cursor-follower"></div>

    <nav id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">LEX ROOT</a>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="services.html">Services</a></li>
                <li><a href="portfolio.html" class="active-link">Portfolio</a></li>
                <li><a href="articles.html">Articles</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <button class="mobile-menu-toggle" id="mobileMenu" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <section class="portfolio-hero">
        <div class="hero-bg-animation">
            <div class="grid-lines"></div>
        </div>
        <div class="portfolio-hero-content reveal">
            <div class="hero-badge">âœ¨ Case Studies & Success Stories</div>
            <h1>
                Transforming <span class="gradient-text">Legal Challenges</span><br>
                Into Growth Opportunities
            </h1>
            <p>Explore how Lex Root empowers businesses to navigate compliance and scale with clarity.</p>
        </div>
    </section>

    <section class="filter-section reveal">
        <div class="filter-container">
            <div class="filter-tabs">
                <button class="filter-tab active" data-filter="all">All Projects</button>
                <button class="filter-tab" data-filter="compliance">Compliance</button>
                <button class="filter-tab" data-filter="content">Content Strategy</button>
                <button class="filter-tab" data-filter="marketing">Legal Marketing</button>
                <button class="filter-tab" data-filter="research">Research</button>
            </div>
        </div>
    </section>

    <section class="portfolio-section">
        <div class="portfolio-container">
            <div class="portfolio-grid">
                <div class="project-card reveal" data-category="compliance" data-project-id="dpdpa-compliance">
                    <div class="project-image" style="background-image: url('https://placehold.co/600x400/0a0e27/00f5ff?text=DPDPA+Framework');">
                        <div class="project-overlay">
                            <button class="view-project"><i data-lucide="eye"></i> View Case Study</button>
                        </div>
                    </div>
                    <div class="project-content">
                        <span class="project-category">Compliance</span>
                        <h3 class="project-title">DPDPA Compliance Framework for SaaS Startup</h3>
                        <p class="project-description">Developed a comprehensive compliance tracking system using Notion, ensuring adherence to India's DPDPA.</p>
                        <div class="project-stats">
                            <div class="stat"><span class="stat-value">100%</span><span class="stat-label">Adherence</span></div>
                            <div class="stat"><span class="stat-value">3 Wks</span><span class="stat-label">Timeline</span></div>
                        </div>
                        <div class="project-tech">
                            <span class="tech-tag">Notion</span><span class="tech-tag">DPDPA</span><span class="tech-tag">SaaS</span>
                        </div>
                    </div>
                </div>

                 <div class="project-card reveal" data-category="content" data-project-id="legal-blog-growth">
                    <div class="project-image" style="background-image: url('https://placehold.co/600x400/5e60ce/ffffff?text=Blog+Growth');">
                         <div class="project-overlay">
                            <button class="view-project"><i data-lucide="eye"></i> View Case Study</button>
                        </div>
                    </div>
                    <div class="project-content">
                        <span class="project-category">Content Strategy</span>
                        <h3 class="project-title">Legal Blog Growth Strategy</h3>
                        <p class="project-description">Ghostwrote SEO-optimized legal content, increasing organic traffic by 40% and generating 150+ qualified leads monthly.</p>
                         <div class="project-stats">
                            <div class="stat"><span class="stat-value">+40%</span><span class="stat-label">Traffic</span></div>
                            <div class="stat"><span class="stat-value">150+</span><span class="stat-label">Leads/mo</span></div>
                        </div>
                        <div class="project-tech">
                            <span class="tech-tag">SEO</span><span class="tech-tag">Content</span><span class="tech-tag">Analytics</span>
                        </div>
                    </div>
                </div>
                 <div class="project-card reveal" data-category="research" data-project-id="apac-market-entry">
                    <div class="project-image" style="background-image: url('https://placehold.co/600x400/ff006e/ffffff?text=APAC+Strategy');">
                         <div class="project-overlay">
                            <button class="view-project"><i data-lucide="eye"></i> View Case Study</button>
                        </div>
                    </div>
                    <div class="project-content">
                        <span class="project-category">Market Research</span>
                        <h3 class="project-title">APAC Market Entry Strategy</h3>
                        <p class="project-description">Created regulatory framework and content strategy for legaltech expansion into 5 Southeast Asian markets.</p>
                        <div class="project-stats">
                            <div class="stat"><span class="stat-value">5</span><span class="stat-label">Markets</span></div>
                            <div class="stat"><span class="stat-value">$2M</span><span class="stat-label">Revenue</span></div>
                        </div>
                        <div class="project-tech">
                            <span class="tech-tag">APAC</span><span class="tech-tag">LegalTech</span><span class="tech-tag">Strategy</span>
                        </div>
                    </div>
                </div>
                <div class="project-card reveal" data-category="marketing" data-project-id="law-firm-digital">
                    <div class="project-image" style="background-image: url('https://placehold.co/600x400/00f5ff/0a0e27?text=Digital+Law+Firm');">
                        <div class="project-overlay">
                            <button class="view-project"><i data-lucide="eye"></i> View Case Study</button>
                        </div>
                    </div>
                    <div class="project-content">
                        <span class="project-category">Legal Marketing</span>
                        <h3 class="project-title">Law Firm Digital Transformation</h3>
                        <p class="project-description">Revamped digital presence with modern website copy, LinkedIn strategy, and email automation, tripling online inquiries.</p>
                        <div class="project-stats">
                            <div class="stat"><span class="stat-value">3x</span><span class="stat-label">Inquiries</span></div>
                            <div class="stat"><span class="stat-value">85%</span><span class="stat-label">Open Rate</span></div>
                        </div>
                        <div class="project-tech">
                            <span class="tech-tag">LinkedIn</span><span class="tech-tag">Email</span><span class="tech-tag">Branding</span>
                        </div>
                    </div>
                </div>
                <div class="project-card reveal" data-category="compliance" data-project-id="gdpr-ccpa-audit">
                    <div class="project-image" style="background-image: url('https://placehold.co/600x400/764ba2/ffffff?text=GDPR/CCPA+Audit');">
                        <div class="project-overlay">
                            <button class="view-project"><i data-lucide="eye"></i> View Case Study</button>
                        </div>
                    </div>
                    <div class="project-content">
                        <span class="project-category">Compliance</span>
                        <h3 class="project-title">GDPR & CCPA Audit System for HealthTech</h3>
                        <p class="project-description">Built automated compliance monitoring dashboards for a healthtech startup handling sensitive patient data.</p>
                        <div class="project-stats">
                            <div class="stat"><span class="stat-value">Zero</span><span class="stat-label">Violations</span></div>
                            <div class="stat"><span class="stat-value">80%</span><span class="stat-label">Time Saved</span></div>
                        </div>
                        <div class="project-tech">
                            <span class="tech-tag">GDPR</span><span class="tech-tag">CCPA</span><span class="tech-tag">HealthTech</span>
                        </div>
                    </div>
                </div>
                <div class="project-card reveal" data-category="content" data-project-id="legal-newsletter">
                    <div class="project-image" style="background-image: url('https://placehold.co/600x400/f093fb/0a0e27?text=Legal+Newsletter');">
                        <div class="project-overlay">
                            <button class="view-project"><i data-lucide="eye"></i> View Case Study</button>
                        </div>
                    </div>
                    <div class="project-content">
                        <span class="project-category">Content Strategy</span>
                        <h3 class="project-title">Legal Insights Newsletter Campaign</h3>
                        <p class="project-description">Launched weekly legal insights newsletter reaching 5,000+ subscribers, establishing thought leadership.</p>
                        <div class="project-stats">
                            <div class="stat"><span class="stat-value">5K+</span><span class="stat-label">Subs</span></div>
                            <div class="stat"><span class="stat-value">45%</span><span class="stat-label">Open Rate</span></div>
                        </div>
                        <div class="project-tech">
                            <span class="tech-tag">Newsletter</span><span class="tech-tag">Fintech</span><span class="tech-tag">Content</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="modal" id="caseStudyModal">
        <div class="modal-content-wrapper">
            <div class="modal-inner-content">
                </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="https://linkedin.com/company/lexroot" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn"><i data-lucide="linkedin"></i></a>
                <a href="https://twitter.com/lexroot" target="_blank" rel="noopener noreferrer" aria-label="Twitter"><i data-lucide="twitter"></i></a>
                <a href="mailto:hello@lexroot.com" aria-label="Email"><i data-lucide="mail"></i></a>
            </div>
            <p>&copy; <span id="currentYear"></span> Lex Root Agency. Crafted with precision and purpose.</p>
        </div>
    </footer>

    <script>
        // Dynamically set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Loading Screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loader = document.getElementById('loader');
                if(loader) loader.classList.add('hidden');
            }, 300); // Faster load for subpages
        });

        // Custom Cursor
        const cursor = document.getElementById('cursor');
        const cursorFollower = document.getElementById('cursor-follower');
        if (cursor && cursorFollower) {
            let mouseX = 0;
            let mouseY = 0;
            let followerX = 0;
            let followerY = 0;
            const KFS = 0.25; 

            mouseX = window.innerWidth / 2; 
            mouseY = window.innerHeight / 2;
            followerX = mouseX;
            followerY = mouseY;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            function animateCursor() {
                if (cursor && cursorFollower) {
                    cursor.style.transform = `translate(${mouseX}px, ${mouseY}px) translate(-50%, -50%)`;
                    const dx = mouseX - followerX;
                    const dy = mouseY - followerY;
                    followerX += dx * KFS;
                    followerY += dy * KFS;
                    cursorFollower.style.transform = `translate(${followerX}px, ${followerY}px) translate(-50%, -50%)`;
                }
                requestAnimationFrame(animateCursor);
            }
            animateCursor();

            document.querySelectorAll('a, button, .project-card, .filter-tab, input[type="text"]').forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
            });

            document.addEventListener('mouseleave', () => {
                if(cursor) cursor.style.opacity = '0';
                if(cursorFollower) cursorFollower.style.opacity = '0';
            });
            document.addEventListener('mouseenter', () => {
                if(cursor) cursor.style.opacity = '1';
                if(cursorFollower) cursorFollower.style.opacity = '1';
            });
        }

        // Navbar scroll effect
        const navbar = document.getElementById('navbar');
        if (navbar) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
        }

        // Mobile menu
        const mobileMenuToggle = document.getElementById('mobileMenu');
        const navLinksList = document.getElementById('navLinks');
       
        if (mobileMenuToggle && navLinksList) {
            mobileMenuToggle.addEventListener('click', () => {
                const isActive = navLinksList.classList.toggle('active');
                mobileMenuToggle.classList.toggle('open');
                mobileMenuToggle.setAttribute('aria-expanded', isActive);
            });
            navLinksList.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (navLinksList.classList.contains('active')) {
                        navLinksList.classList.remove('active');
                        mobileMenuToggle.classList.remove('open');
                        mobileMenuToggle.setAttribute('aria-expanded', 'false');
                    }
                });
            });
        }
        
        // Reveal on scroll
        const revealElements = document.querySelectorAll('.reveal');
        const revealOnScroll = () => {
           revealElements.forEach(el => {
               const windowHeight = window.innerHeight;
               const elementTop = el.getBoundingClientRect().top;
               const elementVisible = 50; 
               
               if (elementTop < windowHeight - elementVisible) {
                   el.classList.add('active');
               } else {
                   // Optional: remove active class if element scrolls out of view upwards
                   // el.classList.remove('active'); 
               }
           });
        };
        window.addEventListener('scroll', revealOnScroll);
        // Initial check in case elements are already in view
        setTimeout(revealOnScroll, 100); // Slight delay to ensure layout is stable


        // Filter functionality
        const filterTabs = document.querySelectorAll('.filter-tab');
        const projectCards = document.querySelectorAll('.project-card');

        filterTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                filterTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const filterValue = tab.getAttribute('data-filter');
                
                projectCards.forEach(card => {
                    card.classList.remove('active'); // Remove active for re-animation
                    if (filterValue === 'all' || card.getAttribute('data-category') === filterValue) {
                        card.style.display = 'flex'; // Use flex as per card styling
                        // Trigger reflow to restart animation
                        void card.offsetWidth; 
                        card.classList.add('active');
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        // Case Study Data (Ensure this is comprehensive)
        const caseStudies = {
            'dpdpa-compliance': {
                id: 'dpdpa-compliance',
                title: 'DPDPA Compliance Framework for SaaS Startup',
                client: 'TechVault Solutions',
                duration: '3 Weeks',
                category: 'Compliance',
                imageUrl: 'https://placehold.co/800x450/0a0e27/00f5ff?text=DPDPA+Framework+Deep+Dive',
                overview: 'TechVault, a rapidly growing SaaS startup, needed to ensure compliance with India\'s new Digital Personal Data Protection Act (DPDPA) before their Series A funding round. They required a comprehensive compliance framework that could scale with their growth, focusing on data mapping, policy creation, and internal training.',
                challenge: `<h3>The Challenge</h3>
                            <ul>
                                <li>Urgent compliance deadline with potential funding at stake.</li>
                                <li>Complex data flows across multiple cloud services (AWS, Salesforce, HubSpot).</li>
                                <li>No existing documentation of data processing activities or consent mechanisms.</li>
                                <li>Limited in-house legal resources and budget constraints for a large-scale audit.</li>
                                <li>Need for a practical, easy-to-maintain system for ongoing compliance monitoring.</li>
                            </ul>`,
                solution: `<h3>The Solution</h3>
                           <p>Lex Root developed a tailored, Notion-based compliance management system that included:</p>
                           <ul>
                               <li><strong>Data Mapping Dashboard:</strong> Interactive visualization of data flows, identifying all PII touchpoints.</li>
                               <li><strong>Policy Generation Suite:</strong> Customized privacy policies, cookie policies, consent forms, and data processing agreements (DPAs) aligned with DPDPA.</li>
                               <li><strong>Automated Compliance Checklists:</strong> Step-by-step actionable tasks for DPDPA requirements, with progress tracking and accountability assignment.</li>
                               <li><strong>Risk Assessment Matrix:</strong> Identified and prioritized compliance risks with mitigation strategies.</li>
                               <li><strong>Employee Training Module:</strong> Concise training materials and a quiz on DPDPA essentials for all staff.</li>
                               <li><strong>Vendor Assessment Protocol:</strong> Standardized questionnaire for third-party data processors.</li>
                           </ul>`,
                results: `<h3>The Results</h3>
                          <div class="case-study-metrics">
                              <div class="metric"><span class="metric-value">100%</span><span class="metric-label">DPDPA Adherence</span></div>
                              <div class="metric"><span class="metric-value">$2.5M</span><span class="metric-label">Series A Secured</span></div>
                              <div class="metric"><span class="metric-value">-80%</span><span class="metric-label">Manual Effort</span></div>
                              <div class="metric"><span class="metric-value">Zero</span><span class="metric-label">Violations Post-Impl.</span></div>
                          </div>`,
                testimonial: '<blockquote>"Lex Root\'s DPDPA framework was not just compliant, it was incredibly practical. The Notion system they built is now central to our operations. This was key to securing our Series A."<cite>Rahul Mehta, CEO, TechVault Solutions</cite></blockquote>'
            },
            'legal-blog-growth': { // ... Add full details for other case studies ...
                id: 'legal-blog-growth',
                title: 'Legal Blog & SEO Growth Strategy',
                client: 'Sterling Law Associates',
                duration: '6 Months',
                category: 'Content Strategy',
                imageUrl: 'https://placehold.co/800x450/5e60ce/ffffff?text=Legal+Blog+SEO+Success',
                overview: 'Sterling Law Associates, a mid-sized law firm specializing in corporate law, wanted to establish thought leadership and generate leads through content marketing. Their existing blog had minimal traffic and zero lead generation.',
                challenge: `<h3>The Challenge</h3>
                            <ul>
                                <li>Outdated website with poor SEO performance and technical issues.</li>
                                <li>No defined content strategy or consistent editorial calendar.</li>
                                <li>Legal jargon making content inaccessible to their target SME audience.</li>
                                <li>Heavy reliance on traditional referrals, minimal online lead generation.</li>
                                <li>Difficulty ranking for competitive corporate law keywords.</li>
                            </ul>`,
                solution: `<h3>The Solution</h3>
                           <p>Our team implemented a comprehensive content and SEO strategy:</p>
                           <ul>
                               <li><strong>Technical SEO Audit & Fixes:</strong> Resolved site speed, mobile usability, and crawlability issues.</li>
                               <li><strong>Keyword Research & Content Pillars:</strong> Identified high-intent keywords and established core content themes.</li>
                               <li><strong>Editorial Calendar & Ghostwriting:</strong> Developed a 6-month calendar and produced 8 high-quality, SEO-optimized articles per month (e.g., "Understanding Shareholder Agreements," "Navigating Commercial Leases").</li>
                               <li><strong>Content Upgrades (Lead Magnets):</strong> Created downloadable checklists (e.g., "Startup Legal Health Check") and templates.</li>
                               <li><strong>On-Page & Off-Page SEO:</strong> Optimized all content, built relevant backlinks, and managed Google My Business.</li>
                               <li><strong>Performance Tracking:</strong> Monthly reporting on traffic, rankings, and lead generation.</li>
                           </ul>`,
                results: `<h3>The Results</h3>
                          <div class="case-study-metrics">
                              <div class="metric"><span class="metric-value">+350%</span><span class="metric-label">Organic Traffic</span></div>
                              <div class="metric"><span class="metric-value">150+</span><span class="metric-label">Leads/Month</span></div>
                              <div class="metric"><span class="metric-value">Top 3</span><span class="metric-label">Ranking for 12 Keywords</span></div>
                              <div class="metric"><span class="metric-value">12</span><span class="metric-label">New Corporate Clients</span></div>
                          </div>`,
                testimonial: '<blockquote>"The content strategy from Lex Root has fundamentally changed our client acquisition. Our blog is now a lead-generating machine, and we\'re seen as true experts."<cite>Priya Sterling, Managing Partner</cite></blockquote>'
            },
             'apac-market-entry': {
                id: 'apac-market-entry',
                title: 'APAC Market Entry Strategy for LegalTech',
                client: 'InnovateLegal Corp.',
                duration: '2 Months',
                category: 'Market Research',
                imageUrl: 'https://placehold.co/800x450/ff006e/ffffff?text=APAC+LegalTech+Launch',
                overview: 'InnovateLegal Corp., a US-based legal software company, planned to expand into key Southeast Asian markets (Singapore, Malaysia, Indonesia, Thailand, Vietnam). They needed comprehensive regulatory research, cultural adaptation strategies, and a go-to-market plan.',
                challenge: `<h3>The Challenge</h3>
                            <ul>
                                <li>Navigating diverse and complex regulatory landscapes across 5 distinct jurisdictions.</li>
                                <li>Understanding local business etiquette, language nuances, and legal tech adoption rates.</li>
                                <li>Identifying key local competitors and potential integration partners.</li>
                                <li>Adapting product messaging and pricing for varied economic conditions.</li>
                                <li>Building trust and credibility in new, culturally diverse markets.</li>
                            </ul>`,
                solution: `<h3>The Solution</h3>
                           <p>Lex Root delivered a multi-faceted market entry package:</p>
                           <ul>
                               <li><strong>Country-Specific Regulatory Playbooks:</strong> Detailed analysis of data privacy, e-commerce, and software licensing laws for each target country.</li>
                               <li><strong>Cultural Localization Guide:</strong> Insights on communication styles, business practices, and UI/UX preferences.</li>
                               <li><strong>Competitive Analysis:</strong> In-depth review of local and international competitors in each market.</li>
                               <li><strong>Partnership Prospectus:</strong> Identified and vetted potential channel partners and resellers.</li>
                               <li><strong>Phased Go-To-Market Strategy:</strong> Prioritized market entry sequence with tailored launch plans and KPIs for each country.</li>
                           </ul>`,
                results: `<h3>The Results</h3>
                          <div class="case-study-metrics">
                              <div class="metric"><span class="metric-value">5</span><span class="metric-label">Markets Successfully Entered</span></div>
                              <div class="metric"><span class="metric-value">$2M</span><span class="metric-label">Projected Y1 Revenue</span></div>
                              <div class="metric"><span class="metric-value">8</span><span class="metric-label">Strategic Partnerships Secured</span></div>
                              <div class="metric"><span class="metric-value">-40%</span><span class="metric-label">Time-to-Market vs. Initial Estimate</span></div>
                          </div>`,
                testimonial: '<blockquote>"The clarity and depth of Lex Root\'s research were astounding. Their strategy gave us the confidence to navigate the APAC region effectively, saving us months of guesswork."<cite>David Chen, VP International, InnovateLegal Corp.</cite></blockquote>'
            },
            // ... Add other case studies with full details
        };

        // Modal functionality
        const modal = document.getElementById('caseStudyModal');
        const modalInnerContent = modal.querySelector('.modal-inner-content');
        
        document.querySelectorAll('.project-card .view-project').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const card = button.closest('.project-card');
                const projectId = card.dataset.projectId;
                const caseStudy = caseStudies[projectId];

                if (caseStudy && modalInnerContent) {
                    modalInnerContent.innerHTML = `
                        <button class="close-modal" id="modalCloseButton" aria-label="Close case study">
                            <i data-lucide="x"></i>
                        </button>
                        <div class="case-study-header">
                            <span class="case-study-category">${caseStudy.category}</span>
                            <h1 class="case-study-title">${caseStudy.title}</h1>
                            <div class="case-study-meta">
                                <span><i data-lucide="user"></i> Client: ${caseStudy.client}</span>
                                <span><i data-lucide="calendar-days"></i> Duration: ${caseStudy.duration}</span>
                            </div>
                        </div>
                        <div class="case-study-body">
                            <section class="case-study-section">
                                <h2>Project Overview</h2>
                                <p>${caseStudy.overview}</p>
                            </section>
                            <section class="case-study-section">
                                ${caseStudy.challenge}
                            </section>
                            <section class="case-study-section">
                                ${caseStudy.solution}
                            </section>
                            <section class="case-study-section">
                                ${caseStudy.results}
                            </section>
                            ${caseStudy.testimonial ? `<section class="case-study-testimonial">${caseStudy.testimonial}</section>` : ''}
                            
                            <section class="ai-outcome-forecaster">
                                <h4><i data-lucide="brain-circuit"></i> AI Outcome Forecaster</h4>
                                <p>How could a similar approach benefit your specific goal? Enter your objective:</p>
                                <div class="ai-outcome-input-group">
                                    <input type="text" id="ai-objective-input" placeholder="e.g., Improve team efficiency by 20%">
                                    <button id="ai-forecast-submit" class="btn-primary">
                                        <i data-lucide="wand-2"></i> Forecast
                                    </button>
                                </div>
                                <div id="ai-forecast-status" class="ai-forecast-status"></div>
                                <div id="ai-forecast-response">Your forecast will appear here...</div>
                            </section>
                        </div>
                        <div class="case-study-cta">
                            <h3>Interested in similar results?</h3>
                            <a href="contact.html" class="btn-primary"><i data-lucide="mail"></i> Let's Discuss Your Project</a>
                        </div>
                    `;
                    if (typeof lucide !== 'undefined') lucide.createIcons(); // Re-render icons in modal

                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent background scroll
                    modal.querySelector('.modal-content-wrapper').scrollTop = 0; // Scroll modal to top

                    // Attach event listener to the new close button
                    document.getElementById('modalCloseButton').addEventListener('click', () => {
                        modal.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    });

                    // Attach AI Forecaster listener
                    const forecastButton = document.getElementById('ai-forecast-submit');
                    if (forecastButton) {
                        forecastButton.addEventListener('click', () => handleAiOutcomeForecast(caseStudy));
                    }
                }
            });
        });

        // Close modal by clicking outside or pressing ESC
        modal.addEventListener('click', (e) => {
            if (e.target === modal) { // Clicked on the backdrop
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        function sanitizeForPrompt(text) {
            if (typeof text !== 'string') return '';
            return text.replace(/\\/g, '\\\\').replace(/`/g, '\\`').replace(/\$\{/g, '\\${');
        }
        
        async function callGeminiAPI(prompt, responseElement, statusElement, loadingClass, errorClass, buttonElement) {
            if (statusElement) statusElement.textContent = 'AI is processing...';
            if (statusElement && loadingClass) statusElement.className = `ai-forecast-status ${loadingClass}`;
            if (responseElement) responseElement.textContent = 'AI is thinking...'; // Update main response area too
            if (buttonElement) buttonElement.disabled = true;

            try {
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                const apiKey = ""; // Provided by Canvas environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;
                
                const fetchResponse = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!fetchResponse.ok) {
                    const errorData = await fetchResponse.json().catch(() => ({}));
                    console.error('Gemini API Error:', errorData);
                    throw new Error(`API request failed: ${fetchResponse.statusText} - ${errorData?.error?.message || 'Unknown error'}`);
                }

                const result = await fetchResponse.json();
                
                if (result.candidates && result.candidates[0].content?.parts?.[0]?.text) {
                    if (statusElement) statusElement.textContent = ''; 
                    if (statusElement) statusElement.className = 'ai-forecast-status';
                    if (responseElement) responseElement.textContent = result.candidates[0].content.parts[0].text;
                    return result.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('Unexpected API response structure.');
                }
            } catch (error) {
                console.error('Error in callGeminiAPI:', error);
                if (statusElement) statusElement.textContent = `Error: ${error.message}`;
                if (statusElement && errorClass) statusElement.className = `ai-forecast-status ${errorClass}`;
                if (responseElement) responseElement.textContent = 'Could not generate forecast at this time.';
                return null;
            } finally {
                if (buttonElement) buttonElement.disabled = false;
            }
        }


        async function handleAiOutcomeForecast(currentCaseStudy) {
            const objectiveInput = document.getElementById('ai-objective-input');
            const forecastResponseElement = document.getElementById('ai-forecast-response');
            const forecastStatusElement = document.getElementById('ai-forecast-status');
            const forecastButton = document.getElementById('ai-forecast-submit');

            if (!objectiveInput || !forecastResponseElement || !forecastStatusElement || !currentCaseStudy) return;

            const userObjective = objectiveInput.value.trim();
            if (!userObjective) {
                forecastStatusElement.textContent = 'Please enter your business objective.';
                forecastStatusElement.className = 'ai-forecast-status ai-forecast-error';
                return;
            }

            // Extract key elements from the case study for context
            // This needs to be robust. For simplicity, we'll use the overview and title.
            // A more advanced approach might parse the HTML of caseStudy.results or caseStudy.solution
            const caseStudyContext = `Case Study Title: ${sanitizeForPrompt(currentCaseStudy.title)}. 
                                     Overview: ${sanitizeForPrompt(currentCaseStudy.overview.substring(0, 200))}...`; // Limit length

            const prompt = `You are an AI business analyst.
            Consider the following Lex Root Agency case study:
            ${caseStudyContext}

            A potential client is interested in achieving the following business objective: "${sanitizeForPrompt(userObjective)}"

            Based *only* on the nature of the case study provided (do not refer to its specific metrics unless they are directly analogous to the user's objective) and the user's stated objective, provide a concise (1-2 sentences, max 40 words) and positive hypothetical forecast of how a similarly strategic approach by Lex Root Agency could potentially benefit their objective. 
            
            Frame this as a potential benefit or an area where improvement could be seen. Do not make specific guarantees or use exact numbers unless the user's objective is directly about a metric mentioned in the case study (which is unlikely here).
            Focus on general positive language. Start directly with the forecast.
            Example: "A strategic approach like this could significantly enhance your team's efficiency in achieving [user's objective]." OR "This type of solution has the potential to streamline processes related to [user's objective]."
            
            Hypothetical Forecast:`;

            await callGeminiAPI(prompt, forecastResponseElement, forecastStatusElement, 'ai-forecast-loading', 'ai-forecast-error', forecastButton);
        }


        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            } else {
                console.warn('Lucide icons script not loaded. Retrying...');
                setTimeout(() => {
                     if (typeof lucide !== 'undefined') {
                        lucide.createIcons();
                     } else {
                        console.error('Lucide icons failed to load after retry.');
                     }
                }, 500);
            }
            // Initial reveal check
            revealOnScroll();
        });
    </script>
</body>
</html>
